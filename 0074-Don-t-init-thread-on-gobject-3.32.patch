From baabf7a258679464ef31610481e4a80c39cf942c Mon Sep 17 00:00:00 2001
From: Nick Schermer <nick@xfce.org>
Date: Tue, 23 Jul 2013 11:26:48 +0200
Subject: [PATCH 074/219] Don't init thread on >= gobject 3.32.

---
 settings/xfpm-settings-main.c | 6 ++++--
 src/xfpm-main.c               | 4 +++-
 2 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/settings/xfpm-settings-main.c b/settings/xfpm-settings-main.c
index 995be00..6071315 100644
--- a/settings/xfpm-settings-main.c
+++ b/settings/xfpm-settings-main.c
@@ -125,10 +125,12 @@ int main (int argc, char **argv)
 		error = NULL;
 		return EXIT_FAILURE;
 	    }
-	    
+	
+#if !GLIB_CHECK_VERSION (2, 32, 0)
 	    if ( !g_thread_supported () )
 		g_thread_init (NULL);
-		
+#endif
+
 	    dbus_g_thread_init ();
 	    
 	    channel = xfconf_channel_new(XFPM_CHANNEL_CFG);
diff --git a/src/xfpm-main.c b/src/xfpm-main.c
index a98583b..40959c8 100644
--- a/src/xfpm-main.c
+++ b/src/xfpm-main.c
@@ -272,9 +272,11 @@ int main (int argc, char **argv)
 	{ NULL, },
     };
 
+#if !GLIB_CHECK_VERSION (2, 32, 0)
     if ( !g_thread_supported () )
 	g_thread_init (NULL);
-       
+#endif
+
     dbus_g_thread_init ();
 
     xfce_textdomain (GETTEXT_PACKAGE, LOCALEDIR, "UTF-8");
-- 
1.9.3

